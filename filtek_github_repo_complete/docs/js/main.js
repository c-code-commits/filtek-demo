
document.addEventListener('DOMContentLoaded', ()=>{
  const links=document.querySelectorAll('nav a'); links.forEach(l=>l.addEventListener('click',(e)=>{e.preventDefault();document.querySelector(l.getAttribute('href')).scrollIntoView({behavior:'smooth'})}));
  const btn = document.getElementById('theme-toggle');
  if(btn){ function applyTheme(theme){ if(theme==='light') document.documentElement.classList.add('light'); else document.documentElement.classList.remove('light'); }
    const saved = localStorage.getItem('filtek_theme') || 'dark'; applyTheme(saved);
    btn.addEventListener('click', ()=>{ const cur = document.documentElement.classList.contains('light') ? 'light' : 'dark'; const next = cur==='light' ? 'dark' : 'light'; applyTheme(next); localStorage.setItem('filtek_theme', next); btn.textContent = next==='light' ? 'Light' : 'Dark'; });
  }
  const form = document.getElementById('contact-form'); const status = document.getElementById('contact-status'); const mailtoBtn = document.getElementById('mailto-btn'); const fallbackEmail = 'devendra.cn2@gmail.com';
  if(mailtoBtn){ mailtoBtn.addEventListener('click', function(){ const name = form.name.value || ''; const email = form.email.value || ''; const message = form.message.value || ''; const subject = encodeURIComponent('Website contact from ' + name); const body = encodeURIComponent('Name: ' + name + '\nEmail: ' + email + '\n\n' + message); window.location.href = `mailto:${fallbackEmail}?subject=${subject}&body=${body}`; }); }
  if(!form) return;
  form.addEventListener('submit', async function(e){ e.preventDefault(); status.textContent = 'Sending...'; const data = { name: form.name.value, email: form.email.value, message: form.message.value }; try { const res = await fetch('/.netlify/functions/contact', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) }); if(res.ok){ status.textContent = 'Message sent. Thank you!'; form.reset(); } else { status.textContent = 'Failed to send via server — opening mail client as fallback.'; const subject = encodeURIComponent('Website contact from ' + data.name); const body = encodeURIComponent('Name: ' + data.name + '\nEmail: ' + data.email + '\n\n' + data.message); window.location.href = `mailto:${fallbackEmail}?subject=${subject}&body=${body}`; } } catch (err) { status.textContent = 'Network error — opening mail client as fallback.'; const subject = encodeURIComponent('Website contact from ' + data.name); const body = encodeURIComponent('Name: ' + data.name + '\nEmail: ' + data.email + '\n\n' + data.message); window.location.href = `mailto:${fallbackEmail}?subject=${subject}&body=${body}`; } }); 
});
